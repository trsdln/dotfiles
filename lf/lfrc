# configuration below solves problem with spaces at file names for Zsh
set shell zsh
set shellopts '-eu:--shwordsplit'
set ifs "\n"
set filesep "\n"

cmd open ${{
  if [[ $f == *.djvu ]]; then
    # otherwise we hit image mimetype at the case statement
    xdg-open $f
  else
    case $(file --mime-type $f -b) in
      image/*) sxiv -a $fx;;
      video/*) mpv $fx;;
      *) for f in $fx; do xdg-open $f > /dev/null 2> /dev/null & done;;
    esac
  fi
}}

cmd mpvsub $mpv --sub-file $(fzf --prompt="Subtitles file>") $fx

map a push %mkdir<space>
